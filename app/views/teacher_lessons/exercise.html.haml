:ruby
  sorted_resources = @lesson.resources.sort_by { |r| r.blob.filename }

= turbo_frame_tag 'lesson' do
  = render 'teacher_lessons/tabs',
           lessons: @type_lessons, active_lesson: @lesson, level: @level,
           teacher_id: @teacher.id, type: @type, date: @date

  .content
    %header
      %h1.col-span-3.text-start.font-bold.text-2xl.border-b-2.border-secondary
        = @lesson.type.titleize
      %h1.font-bold.text-2xl.text-end.border-b-2.border-secondary
        = @lesson.subtype.titleize
      = image_tag type_icon_path(@lesson),
                  class: 'place-self-center row-span-2'
      %h3.col-span-4.font-semibold.text-lg= @lesson.title

    - if @lesson.guide.attached?
      = render 'teacher_lessons/guide_section',
               lesson: @lesson

    - if sorted_resources.any?
      = render 'teacher_lessons/resources_section',
               resources: sorted_resources
