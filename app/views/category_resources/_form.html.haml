-# locals: (cr:, courses:)

= form_with model: cr,
            class: 'flex flex-wrap justify-center items-center p-3 gap-3' do |f|
  .w-full
    = render 'shared/form_errors', resource: cr

  %div{ class: 'form-group basis-1/3' }
    = f.label :lesson_category
    = f.select :lesson_category,
               opts_from(CategoryResource, :lesson_categories)

  %div{ class: 'form-group basis-1/3' }
    = f.label :resource_category
    = f.select :resource_category,
               opts_from(CategoryResource, :resource_categories)

  %div{ class: 'form-group basis-1/2' }
    = f.label :resource, t('.resource'), class: 'form-label'
    = f.file_field :resource, class: 'form-control'

  = f.submit class: 'btn btn-primary w-full'

- if @phonics_resources&.any?
  .flex.flex-col.items-center.text-center
    %h3 Used by:
    %table
      %thead
        %tr
          %th.thead.thead-s.bg-secondary-50 Lesson
          %th.thead.thead-e.bg-secondary-50 Week
      %tbody
        - @phonics_resources.each do |pr|
          %tr
            %td= link_to pr.phonics_class.title, lesson_path(pr.phonics_class)
            %td= pr.week
